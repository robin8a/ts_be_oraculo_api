# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type Model {
  id: ID!
  name: String!
  description: String!
  document_link: String!
  api_link: String!
  version: String!
  is_approved: Boolean!
  tokens_cost: Int!
  cost_tokens: Int!
  calculations: [Calculation] @hasMany
}

type Calculation {
  id: ID!
  polygon: AWSJSON!
  start_date: AWSTimestamp!
  end_date: AWSTimestamp!
  satellite_TIF: AWSURL!
  result_TIF: AWSURL!
  result_PNG: AWSURL!
  is_to_block_chain: Boolean!
  model: Model @belongsTo
  user: User @belongsTo
}

type User {
  id: ID!
  user_model_packages: [UserModelPackage] @hasMany
  calculations: [Calculation] @hasMany
}

type ModelPackage {
  id: ID!
  tokenAmount: Int!
  user_model_packages: [UserModelPackage] @hasMany
}

type UserModelPackage {
  id: ID!
  modelPackage: ModelPackage @belongsTo
  user: User @belongsTo
}