# This "input" configures a global authorization rule to enable public access to
# all models in this schema. Learn more about authorization rules here: https://docs.amplify.aws/cli/graphql/authorization-rules
input AMPLIFY { globalAuthRule: AuthRule = { allow: public } } # FOR TESTING ONLY!

type Model {
  id: ID!
  name: String!
  description: String!
  document_link: String!
  api_link: String!
  version: String!
  isApproved: Boolean!
  tokensCost: Int!
  calculations: [Calculation] @hasMany
  cost_tokens: Int
}

type Calculation {
  id: ID!
  polygon: AWSJSON
  startDate: AWSTimestamp
  endDate: AWSTimestamp
  satelliteTIF: AWSURL
  resultTIF: AWSURL
  resultPNG: AWSURL
  isToBlockChain: Boolean
  model: Model @belongsTo
  user: User @belongsTo
  modelID: ID!
  userID: ID!
}

type User {
  id: ID!
  user_model_packages: [UserModelPackage] @hasMany
  calculations: [Calculation] @hasMany
}

type ModelPackage {
  id: ID!
  tokenAmount: Int!
  user_model_packages: [UserModelPackage] @hasMany
}

type UserModelPackage {
  id: ID!
  modelPackage: ModelPackage @belongsTo
  user: User @belongsTo
}